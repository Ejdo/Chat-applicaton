"use strict";(globalThis["webpackChunkslate_messenger"]=globalThis["webpackChunkslate_messenger"]||[]).push([[728],{9728:(e,a,l)=>{l.r(a),l.d(a,{default:()=>te});var t=l(9835),n=l(6970),s=l(1957);const i={class:"column full-height justify-center"},o={class:"row"},r={class:"column q-pa-md"},m=(0,t._)("h3",{class:"row"},"channel members",-1),u=(0,t._)("div",{class:"row no-wrap items-center"},[(0,t._)("div",{class:"col text-h6 ellipsis"}," Add new channel ")],-1),c={class:"col content-center q-gutter-md"};function d(e,a,l,d,h,p){const g=(0,t.up)("q-toolbar-title"),w=(0,t.up)("q-btn"),f=(0,t.up)("q-toolbar"),b=(0,t.up)("q-header"),v=(0,t.up)("q-tab"),C=(0,t.up)("q-tabs"),W=(0,t.up)("q-separator"),y=(0,t.up)("q-icon"),_=(0,t.up)("q-input"),k=(0,t.up)("channel-link"),q=(0,t.up)("q-list"),V=(0,t.up)("q-scroll-area"),Z=(0,t.up)("q-tab-panel"),Q=(0,t.up)("q-select"),U=(0,t.up)("q-tab-panels"),j=(0,t.up)("q-splitter"),N=(0,t.up)("q-drawer"),D=(0,t.up)("router-view"),S=(0,t.up)("q-page-container"),O=(0,t.up)("q-item-label"),M=(0,t.up)("q-item-section"),H=(0,t.up)("q-item"),x=(0,t.up)("q-card-section"),P=(0,t.up)("q-card"),F=(0,t.up)("q-footer"),I=(0,t.up)("q-checkbox"),T=(0,t.up)("q-card-actions"),z=(0,t.up)("q-dialog"),A=(0,t.up)("q-layout"),L=(0,t.Q2)("ripple");return(0,t.wg)(),(0,t.j4)(A,{view:"lHr LpR lFr"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{elevated:"",class:"bg-white text-primary"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{class:"justify-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{shrink:""},{default:(0,t.w5)((()=>[(0,t._)("h2",null,(0,n.zw)(e.activeChannel),1)])),_:1}),(0,t.Wm)(w,{dense:"",flat:"",round:"",icon:"menu",class:"absolute-right",onClick:a[0]||(a[0]=()=>e.rightDrawerOpen=!e.rightDrawerOpen)})])),_:1})])),_:1}),(0,t.Wm)(N,{modelValue:e.leftDrawerOpen,"onUpdate:modelValue":a[10]||(a[10]=a=>e.leftDrawerOpen=a),"show-if-above":"",elevated:"",behavior:"desktop",side:"left"},{default:(0,t.w5)((()=>[(0,t.Wm)(j,{modelValue:e.splitterModel,"onUpdate:modelValue":a[9]||(a[9]=a=>e.splitterModel=a),class:"full-height"},{before:(0,t.w5)((()=>[(0,t.Wm)(C,{modelValue:e.tab,"onUpdate:modelValue":a[1]||(a[1]=a=>e.tab=a),vertical:"","indicator-color":"white"},{default:(0,t.w5)((()=>[(0,t._)("div",i,[(0,t.Wm)(v,{name:"channels",icon:"forum"}),(0,t.Wm)(v,{name:"profile",icon:"person"}),(0,t.Wm)(v,{name:"settings",icon:"settings"}),(0,t.Wm)(w,{icon:"logout",flat:"",rounded:"",class:"absolute-bottom q-my-sm",onClick:e.logout},null,8,["onClick"])])])),_:1},8,["modelValue"])])),after:(0,t.w5)((()=>[(0,t.Wm)(U,{modelValue:e.tab,"onUpdate:modelValue":a[8]||(a[8]=a=>e.tab=a),vertical:"",class:"full-height"},{default:(0,t.w5)((()=>[(0,t.Wm)(Z,{name:"channels",class:"column"},{default:(0,t.w5)((()=>[(0,t._)("h3",o,(0,n.zw)(e.tab),1),(0,t.Wm)(W),(0,t.Wm)(_,{dense:"",outlined:"",modelValue:e.channelFilter,"onUpdate:modelValue":a[2]||(a[2]=a=>e.channelFilter=a),label:"Search",class:"q-my-md"},{prepend:(0,t.w5)((()=>[(0,t.Wm)(y,{name:"search"})])),_:1},8,["modelValue"]),(0,t.Wm)(W),(0,t.Wm)(V,{class:"col"},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{separator:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.channels,((a,l)=>((0,t.wg)(),(0,t.j4)(k,{key:l,channel:a,onClick:l=>e.setActiveChannel(a)},null,8,["channel","onClick"])))),128))])),_:1})])),_:1}),(0,t.Wm)(w,{round:"",color:"primary",icon:"add",class:"fixed-bottom-right q-ma-md",style:{"z-index":"1"},onClick:a[3]||(a[3]=a=>e.addChannelDialog=!0)})])),_:1}),(0,t.Wm)(Z,{name:"profile"},{default:(0,t.w5)((()=>[(0,t._)("h3",null,(0,n.zw)(e.tab),1),(0,t.Wm)(W),(0,t.Wm)(_,{dense:"",outlined:"",modelValue:e.username,"onUpdate:modelValue":a[4]||(a[4]=a=>e.username=a),label:"Username",class:"q-my-md"},null,8,["modelValue"]),(0,t.Wm)(_,{dense:"",outlined:"",modelValue:e.firstName,"onUpdate:modelValue":a[5]||(a[5]=a=>e.firstName=a),label:"First name",class:"q-my-md"},null,8,["modelValue"]),(0,t.Wm)(_,{dense:"",outlined:"",modelValue:e.lastName,"onUpdate:modelValue":a[6]||(a[6]=a=>e.lastName=a),label:"Last name",class:"q-my-md"},null,8,["modelValue"]),(0,t.Wm)(w,{push:"",color:"primary",label:"Save",onClick:e.saveSettings,"no-caps":"",icon:"save"},null,8,["onClick"])])),_:1}),(0,t.Wm)(Z,{name:"settings",class:"q-gutter-md"},{default:(0,t.w5)((()=>[(0,t._)("h3",null,(0,n.zw)(e.tab),1),(0,t.Wm)(W),(0,t.Wm)(Q,{modelValue:e.status,"onUpdate:modelValue":[a[7]||(a[7]=a=>e.status=a),e.setUserStatus],options:e.options,outlined:"",label:"Status"},null,8,["modelValue","options","onUpdate:modelValue"])])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])),_:1},8,["modelValue"]),(0,t.Wm)(S,null,{default:(0,t.w5)((()=>[(0,t.Wm)(D)])),_:1}),(0,t.Wm)(N,{modelValue:e.rightDrawerOpen,"onUpdate:modelValue":a[11]||(a[11]=a=>e.rightDrawerOpen=a),elevated:"",side:"right"},{default:(0,t.w5)((()=>[(0,t._)("div",r,[m,(0,t.Wm)(W),null!=e.activeChannel?((0,t.wg)(),(0,t.j4)(q,{key:0},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.channelMembers,(a=>((0,t.wg)(),(0,t.j4)(H,{key:a.id},{default:(0,t.w5)((()=>[(0,t.Wm)(M,null,{default:(0,t.w5)((()=>[(0,t.Wm)(O,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(a.username),1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(M,{side:""},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{name:"circle",color:e.userState(a.state)},null,8,["color"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})):(0,t.kq)("",!0)])])),_:1},8,["modelValue"]),(0,t.Wm)(F,{class:"bg-secondary q-pa-sm row justify-center bg-white",style:{"z-index":"1"}},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(P,{class:"col-8",style:{color:"#5B636F","border-radius":"0"}},{default:(0,t.w5)((()=>[(0,t.Wm)(x,null,{default:(0,t.w5)((()=>[(0,t.Wm)(q,null,{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.filteredCommands,(a=>(0,t.wy)(((0,t.wg)(),(0,t.j4)(H,{key:a.command,onClick:()=>{e.message=a.command.split(" ")[0]+" ",this.$refs.messageInput.focus()},class:"q-my-sm",clickable:""},{default:(0,t.w5)((()=>[(0,t.Wm)(M,null,{default:(0,t.w5)((()=>[(0,t.Wm)(O,{class:"text-weight-bold"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(a.command),1)])),_:2},1024),(0,t.Wm)(O,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(a.description),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])),[[L]]))),128))])),_:1})])),_:1})])),_:1},512),[[s.F8,"/"===e.message[0]&&e.filteredCommands.length>0]]),(0,t.Wm)(_,{modelValue:e.message,"onUpdate:modelValue":a[12]||(a[12]=a=>e.message=a),ref:"messageInput",placeholder:"Type a message...",outlined:"",dense:"",onKeydown:(0,s.D2)(e.submitMessage,["enter"]),maxlength:"255",class:"shadow-5 col-12","bg-color":"secondary"},{append:(0,t.w5)((()=>[""!==e.message?((0,t.wg)(),(0,t.j4)(y,{key:0,name:"close",onClick:e.clearMessage,class:"cursor-pointer"},null,8,["onClick"])):(0,t.kq)("",!0),(0,t.Wm)(w,{round:"",dense:"",flat:"",icon:"send",color:"primary",onClick:e.submitMessage},null,8,["onClick"])])),_:1},8,["modelValue","onKeydown"])])),_:1}),(0,t.Wm)(z,{modelValue:e.addChannelDialog,"onUpdate:modelValue":a[15]||(a[15]=a=>e.addChannelDialog=a)},{default:(0,t.w5)((()=>[(0,t.Wm)(P,{class:"my-card q-pa-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(x,null,{default:(0,t.w5)((()=>[u])),_:1}),(0,t.Wm)(x,null,{default:(0,t.w5)((()=>[(0,t._)("div",c,[(0,t.Wm)(_,{outlined:"",modelValue:e.newChannelName,"onUpdate:modelValue":a[13]||(a[13]=a=>e.newChannelName=a),class:"row",label:"Name",rules:[e=>e.length>=4||"Name must be minimum 4 characters"]},null,8,["modelValue","rules"]),(0,t.Wm)(I,{modelValue:e.newChannelPublic,"onUpdate:modelValue":a[14]||(a[14]=a=>e.newChannelPublic=a),label:"Public"},null,8,["modelValue"])])])),_:1}),(0,t.Wm)(T,{class:"q-my-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{round:"",color:"primary",icon:"add",class:"absolute-bottom-right q-ma-md",onClick:e.addChannel},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}var h=l(499),p=l(3100);function g(e,a,l,s,i,o){const r=(0,t.up)("q-avatar"),m=(0,t.up)("q-item-section"),u=(0,t.up)("q-item"),c=(0,t.Q2)("ripple");return(0,t.wy)(((0,t.wg)(),(0,t.j4)(u,{clickable:""},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{color:"secondary",icon:"group"})])),_:1}),(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(l.channel),1)])),_:1})])),_:1})),[[c]])}const w={name:"ChannelLink",props:["channel"]};var f=l(1639),b=l(490),v=l(1233),C=l(1357),W=l(990),y=l(1136),_=l(9984),k=l.n(_);const q=(0,f.Z)(w,[["render",g]]),V=q;k()(w,"components",{QItem:b.Z,QItemSection:v.Z,QAvatar:C.Z,QBadge:W.Z}),k()(w,"directives",{Ripple:y.Z});var Z=l(6827),Q=l(4136),U=function(e,a,l,t){function n(e){return e instanceof l?e:new l((function(a){a(e)}))}return new(l||(l=Promise))((function(l,s){function i(e){try{r(t.next(e))}catch(a){s(a)}}function o(e){try{r(t["throw"](e))}catch(a){s(a)}}function r(e){e.done?l(e.value):n(e.value).then(i,o)}r((t=t.apply(e,a||[])).next())}))};const j=(0,t.aZ)({name:"ChatLayout",components:{ChannelLink:V},data:()=>({leftDrawerOpen:!0,rightDrawerOpen:!1,loading:!1,darkMode:!1,status:(0,h.iH)("Online"),options:["Online","Do not disturb","Offline"],commands:[{command:"/join channelName [private]",description:"Join channel or create a new one if it doesn't exist"},{command:"/invite nickName",description:"Invite another user to the channel"},{command:"/revoke nickName",description:"Revoke invite for the user"},{command:"/quit",description:"Delete the channel (must be owner)"},{command:"/cancel",description:"Leave the channel (also deletes the channel if you are owner)"}],tab:(0,h.iH)("channels"),splitterModel:(0,h.iH)(20),searchChannel:(0,h.iH)(""),message:"",username:(0,h.iH)(""),firstName:(0,h.iH)(""),lastName:(0,h.iH)(""),addChannelDialog:(0,h.iH)(!1),newChannelName:(0,h.iH)(""),newChannelPublic:(0,h.iH)(!0)}),computed:Object.assign(Object.assign({},(0,p.Se)("channels",{channels:"joinedChannels",lastMessageOf:"lastMessageOf",channelMembers:"channelMembers"})),{activeChannel(){return this.$store.state.channels.active},channelFilter:{get(){return this.$store.state.channels.channelFilter},set(e){this.setChannelFilter(e)}},filteredCommands(){return this.commands.filter((e=>e.command.split(" ")[0].indexOf(this.message.split(" ")[0])>=0))}}),methods:Object.assign(Object.assign(Object.assign({clearMessage(){this.message=""},setUserStatus(){this.setStatus(this.status)},userState(e){return 0===e?"green":1===e?"red":2===e?"yellow":void 0},setActiveChannel(e){this.getMembers(e),this.channelSetActive(e)},addChannel(){return U(this,void 0,void 0,(function*(){yield Q.api.post("channels/join",{name:this.newChannelName,isPublic:this.newChannelPublic}),this.joinChannel(this.newChannelName),this.addChannelDialog=!1}))},saveSettings(){return U(this,void 0,void 0,(function*(){this.loading=!0;const e={username:this.username,firstName:this.firstName,lastName:this.lastName};yield Q.api.put("/user",e).then((()=>Z.Z.create({message:"Data saved successfully!"})))}))},send(){return U(this,void 0,void 0,(function*(){this.loading=!0,yield this.addMessage({channel:this.activeChannel,message:this.message}),this.loading=!1}))},submitMessage(){return U(this,void 0,void 0,(function*(){if(this.message.length>0){if("/"===this.message[0]){const e=this.message.split(" ")[0];if("/join"===e){const e=this.message.split(" ")[1];let a=!0;"private"===this.message.split(" ")[2]&&(a=!1),e.length>=4?(yield Q.api.post("channels/join",{name:e,isPublic:a}),yield this.joinChannel(e),this.setActiveChannel(e)):Z.Z.create({message:"Channel name must be minimum 4 characters"})}null!=this.activeChannel?"/invite"===e?this.message.split(" ")[1]&&(yield this.inviteUser({channel:this.activeChannel,username:this.message.split(" ")[1]})):"/revoke"===e?this.message.split(" ")[1]&&(yield this.revokeUser({channel:this.activeChannel,username:this.message.split(" ")[1]})):"/quit"===e||"/cancel"===e?yield this.leaveChannel({channel:this.activeChannel}):"/list"===e&&(this.rightDrawerOpen=!0):Z.Z.create({message:"Please select a channel first"})}else null!=this.activeChannel?yield this.send():Z.Z.create({message:"Please select a channel first"});this.message=""}}))}},(0,p.OI)("channels",{channelSetActive:"SET_ACTIVE"})),(0,p.nv)("auth",{logout:"logout",setStatus:"setStatus"})),(0,p.nv)("channels",{addMessage:"addMessage",setChannelFilter:"setChannelFilter",joinChannel:"join",inviteUser:"inviteUser",revokeUser:"revokeUser",leaveChannel:"leaveChannel",getMembers:"getMembers"})),created(){this.username=this.$store.state.auth.user?this.$store.state.auth.user.username:"",this.firstName=this.$store.state.auth.user?this.$store.state.auth.user.firstName:"",this.lastName=this.$store.state.auth.user?this.$store.state.auth.user.lastName:""}});var N=l(249),D=l(6602),S=l(1663),O=l(1973),M=l(4455),H=l(906),x=l(7498),P=l(7817),F=l(900),I=l(9800),T=l(4106),z=l(926),A=l(6611),L=l(2857),$=l(6663),K=l(3246),R=l(4861),B=l(2133),Y=l(3115),E=l(1378),J=l(4458),G=l(3190),X=l(2074),ee=l(1006),ae=l(1821);const le=(0,f.Z)(j,[["render",d]]),te=le;k()(j,"components",{QLayout:N.Z,QHeader:D.Z,QToolbar:S.Z,QToolbarTitle:O.Z,QBtn:M.Z,QDrawer:H.Z,QSplitter:x.Z,QTabs:P.Z,QTab:F.Z,QTabPanels:I.Z,QTabPanel:T.Z,QSeparator:z.Z,QInput:A.Z,QIcon:L.Z,QScrollArea:$.Z,QList:K.Z,QSelect:R.Z,QPageContainer:B.Z,QItem:b.Z,QItemSection:v.Z,QItemLabel:Y.Z,QFooter:E.Z,QCard:J.Z,QCardSection:G.Z,QDialog:X.Z,QCheckbox:ee.Z,QCardActions:ae.Z}),k()(j,"directives",{Ripple:y.Z})}}]);